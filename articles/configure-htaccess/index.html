<!doctype html><html lang=uk><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=manifest href=/favicons/site.webmanifest><link rel=mask-icon href=/favicons/safari-pinned-tab.svg color=#1c262f><link rel="shortcut icon" href=/favicons/favicon.ico><meta name=apple-mobile-web-app-title content=CrazySquirrel><meta name=application-name content=CrazySquirrel><meta name=msapplication-TileColor content=#1c262f><meta name=msapplication-TileImage content=/favicons/mstile-144x144.png><meta name=msapplication-config content=/favicons/browserconfig.xml><meta name=theme-color content=#1c262f><title>Настройка .htaccess</title><meta name=description content="Файл .htaccess является конфигурационным файлом Apache. Он позволяет задать реакцию сервера на запросы пользователя, настроить кэширование и сжатие, а также разграничить доступ к различным разделам сайта."><meta name=keywords content=""><meta last-modified=2021-08-29T20:15:51.618Z><meta name=author content=""><meta property=og:title content=""><meta property=og:description content=""><meta property=og:type content=website><meta property=og:url content=https://uk.crazysquirrel.ru><meta property=og:locale content=uk><meta property=og:site_name content=CrazySquirrel><meta property=og:updated_time content=2021-08-29T20:15:51.618Z><style>@font-face{font-family:'Font Awesome';font-display:swap;src:local("Font Awesome"),url(/static/fonts/fontawesome-webfont.eot) format("eot"),url(/static/fonts/fontawesome-webfont.woff2) format("woff2"),url(/static/fonts/fontawesome-webfont.woff) format("woff"),url(/static/fonts/fontawesome-webfont.ttf) format("truetype"),url(/static/fonts/fontawesome-webfont.svg#fontawesomeregular) format("svg");font-weight:normal;font-style:normal}</style><script>window.global=window.global||globalThis,window.__PRELOADED_STATE__={aside:{aside:0},router:{location:"/articles/configure-htaccess/",modified:"2021-08-29T20:15:51.592Z"},search:{searchText:"",searchResult:[]}}</script><script defer src=/static/npm.sentry.js></script><script defer src=/static/npm.react-redux.js></script><script defer src=/static/npm.disqus-react.js></script><script defer src=/static/npm.babel.js></script><script defer src=/static/npm.prop-types.js></script><script defer src=/static/npm.scheduler.js></script><script defer src=/static/npm.react.js></script><script defer src=/static/npm.react-is.js></script><script defer src=/static/npm.react-dom.js></script><script defer src=/static/npm.path-to-regexp.js></script><script defer src=/static/npm.value-equal.js></script><script defer src=/static/npm.tslib.js></script><script defer src=/static/npm.tiny-invariant.js></script><script defer src=/static/npm.resolve-pathname.js></script><script defer src=/static/npm.redux.js></script><script defer src=/static/npm.react-router.js></script><script defer src=/static/npm.react-router-dom.js></script><script defer src=/static/npm.object-assign.js></script><script defer src=/static/npm.mini-create-react-context.js></script><script defer src=/static/npm.hoist-non-react-statics.js></script><script defer src=/static/npm.history.js></script><script defer src=/static/npm.classnames.js></script><script defer src=/static/npm.bind-decorator.js></script><script defer src=/static/npm.bem-cn.js></script><script defer src=/static/index.js></script><link href=/static/index.css rel=stylesheet></head><body><sectipn id=root><section class=app><main class=main><div itemscope itemtype=https://schema.org/Article><nav class=bread-crumb><a class=link title=Главная href=/ >Главная</a><a class=link title="Полезные статьи" href=/articles/ >Полезные статьи</a><a aria-current=page class="link link link_active" title="Настройка .htaccess" href=/articles/configure-htaccess/ >Настройка .htaccess</a></nav><h1 itemprop="name headline about">Настройка .htaccess</h1><div itemprop=articleBody class=app__content><p>Файл .htaccess является конфигурационным файлом Apache. Он позволяет задать реакцию сервера на запросы пользователя, настроить кэширование и сжатие, а также разграничить доступ к различным разделам сайта,</p><p>Возможности, которые предоставляет htaccess для конфигурации сервера слишком велики, чтобы уместиться в одной статье, но мы не собираемся рассматривать все тонкости конфигурации Apache, а рассмотрим лишь базовые настройки .htaccess для уменьшения дубликатов страниц на сайте.</p><hr><p>Во-первых, на сайте имеется дубликат главного зеркала, сайт открывается как с www, так и без него.</p><p>Такое положение дел плохо тем что:</p><ul><li>Путает пользователя относительно правильности названия сайта</li><li>Ухудшает запоминание название сайта пользователем</li><li>Мешает поисковым роботам адекватно воспринимать страница сайта (поисковые роботы считают страницы с www и без www разными, а контент на них дублируемым)</li></ul><p>Для избавления от дубликата главного зеркала в .htaccess необходимо прописать:</p><pre class=code><code class=lang-txt>RewriteEngine on
RewriteCond %{HTTP_HOST} !^crazysquirrel\.ru$ [NC]
RewriteRule ^(.*)$ https://crazysquirrel.ru/$1 [R=301,L]</code></pre><p>Для настройки в качестве основного зеркала сайта название без www</p><pre class=code><code class=lang-txt>RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.crazysquirrel\.ru$ [NC]
RewriteRule ^(.*)$ https://www.crazysquirrel.ru/$1 [R=301,L]</code></pre><p>Для настройки в качестве основного зеркала названия с www</p><hr><p>Во-вторых, на сайте имеются дубликат головного файла сайта (index.html, index.php и т.д.)</p><p>Такое положение дел плохо тем что:</p><ul><li>Ухудшает вид основной страницы сайта (гораздо приятнее видеть имя сайта без всяких index нежели сними)</li><li>Мешает поисковым роботам адекватно воспринимать страница сайта (поисковые роботы считают адрес сайта с index и без него как разные страницы, а контент на них дублируемым)</li></ul><p>Для избавления от дубликатов головного файла сайта необходимо прописать в .htaccess:</p><pre class=code><code class=lang-txt>RewriteEngine on
RewriteCond %{THE_REQUEST} ^.*/index.php
RewriteRule ^(.*)index.php$ https://crazysquirrel.ru/$1 [R=301,L]</code></pre><hr><p>В-третьих, дубликаты GET (параметров передаваемых в url после знака ?)</p><p>Такое положение дел плохо тем что:</p><ul><li>Ухудшает вид основной страницы сайта (гораздо приятнее видеть URL без GET параметров нежели сними)</li><li>Мешает поисковым роботам адекватно воспринимать страница сайта (поисковые роботы считают адрес сайта с GET и без него как разные страницы, а контент на них дублируемым)</li></ul><p>Для избавления от дубликатов GET необходимо прописать в .htaccess:</p><pre class=code><code class=lang-txt>RewriteEngine on
RewriteCond %{QUERY_STRING} !^$ [NC]
RewriteCond %{THE_REQUEST} \? [NC]
RewriteCond %{THE_REQUEST} !admin [NC]
RewriteRule ^(.*)?(.*)$ https://crazysquirrel.ru/$1? [R=301,L]</code></pre><hr><p>Общее правило для избавления от дубликатов:</p><pre class=code><code class=lang-txt>RewriteEngine on
RewriteCond %{HTTP_HOST} !^crazysquirrel\.ru$ [NC]
RewriteRule ^(.*)$ https://crazysquirrel.ru/$1 [R=301,L]
RewriteCond %{THE_REQUEST} ^.*/index.php
RewriteRule ^(.*)index.php$ https://crazysquirrel.ru/$1 [R=301,L]
RewriteCond %{QUERY_STRING} !^$ [NC]
RewriteCond %{THE_REQUEST} \? [NC]
RewriteCond %{THE_REQUEST} !admin [NC]
RewriteRule ^(.*)?(.*)$ https://crazysquirrel.ru/$1? [R=301,L]</code></pre><hr><p>В данных конфигурациях:</p><ul><li>RewriteEngine on — директива включения/выключения механизма преобразования (пишется одна на весь htaccess)</li><li>RewriteCond %{HTTP_HOST} !^crazysquirrel\.ru$ [NC] — определение условия для применения преобразования только к названиям сайта, отличным от нужного</li><li>RewriteRule ^(.*)$ <a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://crazysquirrel.ru/$1>https://crazysquirrel.ru/$1</a> [R=301,L] — механизм преобразования перенаправляющий пользователя на «правильное имя сайта»</li><li>RewriteCond %{QUERY_STRING} !^$ [NC] — определяет условие для применения преобразования только к адресам у которых есть GET параметры</li><li>RewriteCond %{THE_REQUEST} ? [NC] — определяет условие преобразования только для адресов имеющим ?</li><li>RewriteCond %{THE_REQUEST} !admin [NC] — определяет правила преобразования для адресов не имеющим в своем составе дирректории или файла административной панели сайта (если на сайте нет CMS или для её работы не требуются GET параметры, данную строчку можно не писать)</li><li>crazysquirrel.ru — название сайта</li><li>admin — директория административной панели сайта</li><li>index.php — главный файл сайта</li><li>R=301 — флаг, устанавливающий код состояния http для неправильного сайта (301 — флаг постоянной смены адреса)</li><li>L — флаг, указывающий, что данное правило последнее</li><li>NC — флаг, указывающий, что для данного правила не важен регистр написания</li></ul></div><meta itemprop=datePublished content=2021-08-29T20:15:51.592Z><meta itemprop=dateModified content=2021-08-29T20:15:51.592Z><meta itemprop=keywords content="Настройка .htaccess"><meta itemprop=description content="Файл .htaccess является конфигурационным файлом Apache. Он позволяет задать реакцию сервера на запросы пользователя, настроить кэширование и сжатие, а также разграничить доступ к различным разделам сайта."><meta itemprop=isFamilyFriendly content=True><meta itemprop=inLanguage content=ru_RU><meta itemprop=mainEntityOfPage content=https://uk.crazysquirrel.ru/articles/configure-htaccess/ ><span itemscope itemprop=author itemtype=https://schema.org/Person><meta itemprop=name content="Сергей Ястребов"><link itemprop=url href=https://plus.google.com/u/0/102372703586362573921></span><span itemscope itemprop=publisher itemtype=https://schema.org/Organization><meta itemprop=name content=CrazySquirrel><meta itemprop=address content="111625, Россия, Москва, ул. Святоозерская, 13"><meta itemprop=telephone content="+7 (964) 799 - 94 - 81"><span itemscope itemprop=logo itemtype=https://schema.org/ImageObject><link itemprop=contentUrl href=https://dsps.crazysquirrel.ru/favicon/android-chrome-512x512.png><link itemprop=url href=https://dsps.crazysquirrel.ru/favicon/android-chrome-512x512.png><meta itemprop=width content=512><meta itemprop=height content=512></span></span><span itemscope itemprop=image itemtype=https://schema.org/ImageObject><link itemprop=contentUrl href=https://uk.crazysquirrel.ru/favicons/android-chrome-36x36.png><link itemprop=url href=https://uk.crazysquirrel.ru/favicons/android-chrome-36x36.png><meta itemprop=width content=36><meta itemprop=height content=36></span><span itemscope itemprop=image itemtype=https://schema.org/ImageObject><link itemprop=contentUrl href=https://uk.crazysquirrel.ru/favicons/android-chrome-48x48.png><link itemprop=url href=https://uk.crazysquirrel.ru/favicons/android-chrome-48x48.png><meta itemprop=width content=48><meta itemprop=height content=48></span><span itemscope itemprop=image itemtype=https://schema.org/ImageObject><link itemprop=contentUrl href=https://uk.crazysquirrel.ru/favicons/android-chrome-72x72.png><link itemprop=url href=https://uk.crazysquirrel.ru/favicons/android-chrome-72x72.png><meta itemprop=width content=72><meta itemprop=height content=72></span><span itemscope itemprop=image itemtype=https://schema.org/ImageObject><link itemprop=contentUrl href=https://uk.crazysquirrel.ru/favicons/android-chrome-96x96.png><link itemprop=url href=https://uk.crazysquirrel.ru/favicons/android-chrome-96x96.png><meta itemprop=width content=96><meta itemprop=height content=96></span><span itemscope itemprop=image itemtype=https://schema.org/ImageObject><link itemprop=contentUrl href=https://uk.crazysquirrel.ru/favicons/android-chrome-144x144.png><link itemprop=url href=https://uk.crazysquirrel.ru/favicons/android-chrome-144x144.png><meta itemprop=width content=144><meta itemprop=height content=144></span><span itemscope itemprop=image itemtype=https://schema.org/ImageObject><link itemprop=contentUrl href=https://uk.crazysquirrel.ru/favicons/android-chrome-192x192.png><link itemprop=url href=https://uk.crazysquirrel.ru/favicons/android-chrome-192x192.png><meta itemprop=width content=192><meta itemprop=height content=192></span><span itemscope itemprop=image itemtype=https://schema.org/ImageObject><link itemprop=contentUrl href=https://uk.crazysquirrel.ru/favicons/android-chrome-256x256.png><link itemprop=url href=https://uk.crazysquirrel.ru/favicons/android-chrome-256x256.png><meta itemprop=width content=256><meta itemprop=height content=256></span></div><footer class=footer><div class=accordion><div class=accordion__button></div></div><div class=share><div class="share__item share__item_type_vk"></div><div class="share__item share__item_type_ok"></div><div class="share__item share__item_type_facebook"></div><div class="share__item share__item_type_twitter"></div><div class="share__item share__item_type_google"></div></div></footer></main><aside class="aside aside_side_left"><span class=aside__icons><a class=logotype title=Главная href=/ ><svg class=icon viewBox="0 0 48 50"><use xlink:href=#icon-squirrel-low></use></svg></a><span class=language><span class=language__content><svg class=icon viewBox="0 0 53 32"><use xlink:href=#icon-map-low></use></svg></span></span><span class="burger burger_animation_backwards"><span class=burger__content><span class="burger__line burger__line_line_1"></span><span class="burger__line burger__line_line_2"></span><span class="burger__line burger__line_line_3"></span></span></span><a class=donate title="Поддержите нас" target=_blank rel=noreferrer href=https://money.yandex.ru/to/41001951616035></a></span><div class="aside__content aside__content_type_menu"><nav class=menu><ol><li><a class=link title="Полезные статьи" href=/articles/ >Полезные статьи</a><ol><li><a class=link title="Веб-разработка с нуля" href=/articles/web-development-from-scratch/ >Веб-разработка с нуля</a></li><li><a aria-current=page class="link link link_active" title="Настройка .htaccess" href=/articles/configure-htaccess/ >Настройка .htaccess</a></li><li><a class=link title="Правильный sitemap.xml" href=/articles/correct-sitemap-xml/ >Правильный sitemap.xml</a></li><li><a class=link title="Правильный robots.txt" href=/articles/correct-robots-txt/ >Правильный robots.txt</a></li></ol></li><li><a class=link title="Готовые решения" href=/solutions/ >Готовые решения</a><ol><li><a class=link title="jQuery плагины" href=/solutions/jquery-plugins/ >jQuery плагины</a><ol><li><a class=link title=CSTiles href=/solutions/jquery-plugins/cstiles/ >CSTiles</a></li><li><a class=link title=CSShare href=/solutions/jquery-plugins/csshare/ >CSShare</a></li><li><a class=link title=TexturedText href=/solutions/jquery-plugins/texturedtext/ >TexturedText</a></li></ol></li><li><a class=link title="Пакеты npm" href=/solutions/npm/ >Пакеты npm</a><ol><li><a class=link title=AnimationFrame href=/solutions/npm/animationframe/ >AnimationFrame</a></li><li><a class=link title=CSDebug href=/solutions/npm/csdebug/ >CSDebug</a></li><li><a class=link title=CSLogger href=/solutions/npm/cslogger/ >CSLogger</a></li><li><a class=link title=EverCookie href=/solutions/npm/evercookie/ >EverCookie</a></li><li><a class=link title=UserID href=/solutions/npm/userid/ >UserID</a></li><li><a class=link title=Utils href=/solutions/npm/utils/ >Utils</a></li><li><a class=link title=ViewAbility href=/solutions/npm/viewability/ >ViewAbility</a></li></ol></li><li><a class=link title="Репозитории git" href=/solutions/git/ >Репозитории git</a><ol><li><a class=link title=Rambler-Landing-Page href=/solutions/git/rambler-landing-page/ >Rambler-Landing-Page</a></li><li><a class=link title=UniqueTransport href=/solutions/git/uniquetransport/ >UniqueTransport</a></li></ol></li></ol></li><li><a class=link title=Тесты href=/tests/ >Тесты</a><ol><li><a class=link title="Влияние знака рубля" href=/tests/ruble-sign/ >Влияние знака рубля</a></li></ol></li><li><a class=link title=Инструменты href=/tools/ >Инструменты</a><ol><li><a class=link title=Анализаторы href=/tools/analyzers/ >Анализаторы</a><ol><li><a class=link title="Полный анализ сайта" href=/tools/analyzers/complete/ >Полный анализ сайта</a></li></ol></li><li><a class=link title=Компрессоры href=/tools/compressors/ >Компрессоры</a><ol><li><a class=link title="Минификатор css" href=/tools/compressors/css/ >Минификатор css</a></li><li><a class=link title="Минификатор js" href=/tools/compressors/js/ >Минификатор js</a></li><li><a class=link title="Оптимизатор изображения" href=/tools/compressors/pictures/ >Оптимизатор изображения</a><ol><li><a class=link title="Оптимизатор jpeg" href=/tools/compressors/pictures/jpeg/ >Оптимизатор jpeg</a></li><li><a class=link title="Оптимизатор png" href=/tools/compressors/pictures/png/ >Оптимизатор png</a></li><li><a class=link title="Оптимизатор gif" href=/tools/compressors/pictures/gif/ >Оптимизатор gif</a></li><li><a class=link title="Оптимизатор svg" href=/tools/compressors/pictures/svg/ >Оптимизатор svg</a></li></ol></li></ol></li><li><a class=link title=Конверторы href=/tools/converters/ >Конверторы</a><ol><li><a class=link title="IDN конвертер" href=/tools/converters/idn/ >IDN конвертер</a></li><li><a class=link title="Изображение в base64" href=/tools/converters/image-to-base64/ >Изображение в base64</a></li><li><a class=link title="Base64 конвертер" href=/tools/converters/base64/ >Base64 конвертер</a></li></ol></li><li><a class=link title=Генераторы href=/tools/generators/ >Генераторы</a><ol><li><a class=link title="Map area по изображению" href=/tools/generators/map-area/ >Map area по изображению</a></li><li><a class=link title="Генератор sitemap" href=/tools/generators/sitemap/ >Генератор sitemap</a></li><li><a class=link title="Генератор спрайтов" href=/tools/generators/sprite/ >Генератор спрайтов</a></li></ol></li></ol></li><li><a class=link title=Книги href=/books/ >Книги</a></li><li><a class=link title=Контакты href=/contacts/ >Контакты</a></li><li><a class=link title=Поиск href=/search/ >Поиск</a></li></ol></nav></div><div class="aside__content aside__content_type_language"><nav class=menu><ol><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://ru.crazysquirrel.ru>Russian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://en.crazysquirrel.ru>English</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://hy.crazysquirrel.ru>Armenian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://cs.crazysquirrel.ru>Czech</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://no.crazysquirrel.ru>Norwegian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://sq.crazysquirrel.ru>Albanian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://nl.crazysquirrel.ru>Dutch</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://fr.crazysquirrel.ru>French</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://uk.crazysquirrel.ru>Ukrainian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://ro.crazysquirrel.ru>Romanian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://az.crazysquirrel.ru>Azerbaijan</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://el.crazysquirrel.ru>Greek</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://sr.crazysquirrel.ru>Serbian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://lv.crazysquirrel.ru>Latvian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://be.crazysquirrel.ru>Belarusian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://es.crazysquirrel.ru>Spanish</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://ca.crazysquirrel.ru>Catalan</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://it.crazysquirrel.ru>Italian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://tr.crazysquirrel.ru>Turkish</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://sk.crazysquirrel.ru>Slovak</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://hr.crazysquirrel.ru>Croatian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://lt.crazysquirrel.ru>Lithuanian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://pl.crazysquirrel.ru>Polish</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://bg.crazysquirrel.ru>Bulgarian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://pt.crazysquirrel.ru>Portuguese</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://mk.crazysquirrel.ru>Macedonian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://de.crazysquirrel.ru>German</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://da.crazysquirrel.ru>Danish</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://sv.crazysquirrel.ru>Swedish</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://sl.crazysquirrel.ru>Slovenian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://hu.crazysquirrel.ru>Hungarian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://et.crazysquirrel.ru>Estonian</a></li><li><a class=link title="404 Страница не найдена" target=_blank rel=noreferrer href=https://fi.crazysquirrel.ru>Finnish</a></li></ol></nav></div></aside></section></sectipn><div class=app-svg></div><script>!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports={}:"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.crazysquirrel={}:e.crazysquirrel={}}(self,function(){return{}})</script><script async defer src=//www.google-analytics.com/analytics.js></script><script async defer src=//mc.yandex.ru/metrika/watch.js></script></body></html>